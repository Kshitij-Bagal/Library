import{r as s,j as r,L as a}from"./index-Ce1m1iIM.js";const p=()=>{const[o,i]=s.useState([]),[n,c]=s.useState([]);s.useEffect(()=>{fetch("https://library-backend-vi4b.onrender.com/api/genres").then(e=>e.json()).then(e=>i(e)).catch(e=>console.error("Error fetching genres:",e)),fetch("https://library-backend-vi4b.onrender.com/api/popular-books").then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>c(e)).catch(e=>console.error("Error fetching popular books:",e))},[]);const l=async e=>{const t=e.name;if(!t){console.error("Book ID is missing:",e);return}try{await fetch(`https://library-backend-vi4b.onrender.com/api/books/${t}/increment-visit`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),console.log(`Visit count increased for: ${e.name}`)}catch(h){console.error("Failed to update visit count:",h)}};return r.jsxs("div",{className:"home-container",children:[r.jsx("h1",{children:"Welcome to Our Online Library ðŸ“š"}),r.jsx("p",{children:"Discover a world of knowledge and entertainment. Explore our vast collection of books."}),r.jsxs("section",{className:"genres",children:[r.jsx("h2",{children:"Book Categories"}),o.length>0?r.jsx("ul",{children:o.map(e=>r.jsx("li",{children:r.jsxs(a,{to:`/Library/browse-books/${e.name.toLowerCase()}`,children:[e.name," (",e.count," books)"]})},e.name))}):r.jsx("p",{children:"Loading categories..."})]}),r.jsxs("section",{className:"popular-books",children:[r.jsx("h2",{children:"Popular Books ðŸ“–"}),n.length>0?r.jsx("ul",{children:n.map(e=>r.jsx("li",{className:"popular-book",children:r.jsxs(a,{onClick:()=>l(e),to:`/Library/book/${e.name}`,children:[r.jsx("img",{src:e.imageUrl,alt:e.name,className:"popular-book-cover"}),r.jsxs("div",{children:[r.jsx("h3",{children:e.name}),r.jsxs("p",{children:["by ",e.author]}),r.jsxs("p",{children:["ðŸ‘€ ",e.visitCount||0," visits â€¢ ðŸ“¥ ",e.downloadCount||0," downloads"]})]})]})},e.id))}):r.jsx("p",{children:"Loading popular books..."})]})]})};export{p as default};
